<!DOCTYPE html>
<html>


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>My Calculator</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link href="util.css" rel="stylesheet" type="text/css" />
</head>

<body>
    
    <h1 class="text-center">Welcome to My Calculator</h1>
    <div class="container1 items-center flex flex-col bg-grey">
    <div class="container items-center flex flex-col">
    <div class="row">
        <input class="input" type="text" readonly/>
    </div>
        <div class="row">
            <button class="button" style="background-color: orange; color: black;">AC</button>
            <button class="button" style="background-color: orange; color: black;">C</button>
            <button class="button" style="background-color: white" >%</button>
            <button class="button" style="background-color: white">/</button>
        </div>
        <div class="row">
            <button class="button">7</button>
            <button class="button">8</button>
            <button class="button">9</button>
            <button class="button" style="background-color: white">x</button>
        </div>
        <div class="row">
            <button class="button">4</button>
            <button class="button">5</button>
            <button class="button">6</button>
            <button class="button" style="background-color: white">-</button>
        </div>
        <div class="row">
            <button class="button">1</button>
            <button class="button">2</button>
            <button class="button">3</button>
            <button class="button" style="background-color: white">+</button>
        </div>
        <div class="row">
            <button class="button">00</button>
            <button class="button">0</button>
            <button class="button">.</button>
            <button class="button">=</button>
        </div>
    </div>
    </div>

 <script>
        let string = "";
        let buttons = document.querySelectorAll('.button');
        const operators = ['+', '-', '*','/','%','.']
        

        Array.from(buttons).forEach((button)=>{
            button.addEventListener('click', (event)=>{
                let value = event.target.innerHTML;
                if(value === 'x') value = '*';

                if(value == '=') {
                try {
                    string = eval(string);                   
                } catch(error){
                    string = "Error!";
                }
                document.querySelector('input').value = string;
                }
                else if (value == 'AC'){
                    string = ""
                    document.querySelector('input').value = string;
                }
                else if(value == 'C'){
                    string = string.slice(0,-1)
                    document.querySelector('input').value = string
                } 
                else{
                    const lastchar = string[string.length-1]
                    if(operators.includes(value) && operators.includes(lastchar)){
                        string = string.slice(0,-1) + value;
                    } else {
                        string = string + value;
                    }
                
                document.querySelector('input').value = string;
                }

                 
                
            })
        })
    
    </script>
</body>
</html>